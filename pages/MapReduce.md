- ![MapReduce.pdf](../assets/MapReduce_1676472960870_0.pdf)
- ## 概念
- MapReduce是一个用于可以使用大量处理器，需要处理大量数据的分布式问题的算法框架
- 节点有以下两种：
	- [[a cluster]]: 节点的硬件是同构的（现在认为也可以是异构的）
	- [[a grid]]：节点硬件异构
- 计算过程可以在文件系统上（unstructured, 数据有缺失）或数据库（structured, 所有信息完整且符合要求格式）
-
- ((63ecf3f3-884b-47cc-bd40-6ac1c6266209))
- [[Map]]
	- [[master]]节点接受输入，并划分为子问题，分配给[[worker]]节点。[[worker]]节点也可以将任务再次划分、分配。节点计算完成后将结果返回master节点
- [[Reduce]]
	- [[master]]节点接受子节点的计算结果，综合之后输出原始问题的答案
- # 原理
- ((63ed8fa5-0eeb-4f25-8e29-cbd59d5d6382))
- 1. MapReduce库将数据分成M份，将任务复制给多个处理器
- ((63edf2c6-4f7f-41f7-bb27-257a7b16e842))
- 2. 其中有一个处理器是特殊的，即 [[master]]，其余为 [[worker]]。
- ((63edf310-d498-4a45-ba47-c6341ad3ff0b))
- ((63edf6ff-210e-40d6-93df-a6e9157a2aed))
- ((63edf72f-201c-43b1-9e2c-bee635e87a67))
- ((63edf738-b564-4a2b-bb4a-a6d40fcd03e5))
- ((63edf744-2429-453d-8512-516c4f737299))
- ## 函数解释
- [[map]]
	- 过滤、初步处理：将数据处理成<key;value>的形式，储存在内存或本地磁盘中
- [[reduce]]
	- 将<key; value>的数据整合输出
- ## MapReduce的并发性
- [[map]]操作可以多个同时进行，将原始输入文件分成多份处理
- [[reduce]]在处理时可以做不同的整合工作，但多个[[reducer]]同时进行，可以把<key;value>按不同的目的整合输出成不同的文件
- ## MapReduce的失效处理
- 并发能力对系统稳定性也有帮助，若有[[worker]]（可能是[[maper]]或[[reducer]]），都可以通过其他同类型的节点补充
- ## MapReduce的性能
	- ((63ee14ea-f0c0-4ac8-9ee6-608371ac840e))
- 容错空间
	- [[worker]] Failure: acceptable
	- [[master]] Failure: unacceptable
- 本地
	- [[master]]考虑**输入文件的位置信息**，并尝试在相应输入数据副本的附近机器上安排[[map]]任务。
	- 如果做不到这一点，它会试图在该任务输入数据的副本附近安排一个[[map]]任务
- [[任务粒度]]
	- ((63ee1d12-59c4-4ac7-b606-2b89ae4124d0))
	- M和R会远大于处理器数量，使处理器运行不同的任务，有利于[[负载平衡算法]]，并且加快恢复能力
- 备份任务
	- MapReduce处理任务过慢的一个常见原因是，“straggler”：某一个子任务执行得非常慢，进而导致整体性能下降
	- 当一个整体任务快要执行完成时，[[master]]会指定一些处理器执行备份任务。
- ## MapReduce的实现
- ((63ee1eef-e3bf-4c4c-938e-49d17bb8a14a))
-